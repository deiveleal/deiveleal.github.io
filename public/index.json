[{"content":"\u003cp\u003eWhen I started my studies in sql to handle data from databases many things seemed confused and messed up. The use of nested queries or subqueries was kind of confusing. The longer the query is more difficult, it is to understand what it does. Consequently, its reading, debugging and maintenance are equally difficult. For instance, imagine a code with seven or more different subqueries. The limit is your imagination. But, the more subqueries you have, more business rules can be applied and, consequently, the challenge to maintain them increases. To help us with this great problem, a good option is to use common table expressions or aka cte.\u003c/p\u003e\n\u003cp\u003eCommon table expressions appeared in sql in 1999, but these implements came from 2007. There are two kinds of cte: recursive and non-recursive. The non-recursive approach is closer to our day-by-day uses, but we will try to explain both and what problem they solve. Then, you can decide which the best option is. First, we will approach the recursive way and after we will explain the non-recursive form.\u003c/p\u003e\n\u003cp\u003eThe recursive common table expression is a kind of query and permits it to refer to itself until obtaining a result. The syntax between recursive and non-recursive cte is similar. Both start with the reserved word WITH, but differently from non recursive, the next word used is RECURSIVE, which is only used in this approach. After that, you can provide a name to your cte, write the reserved word AS and, finally, between parenthesis, type at least three main parts: anchor member, recursive member and a connector between both. Finally, you can use and apply the result in another query. The common usage for cte in a recursive form is in hierarchical data such as “displaying employees in an organizational chart, or data in a bill of materials scenario in which a parent product has one or more components and those components may, in turn, have subcomponents or may be components of other parents” (Microsoft).\u003c/p\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-SQL\" data-lang=\"SQL\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eRECURSIVE\u003c/span\u003e cte_name \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cte_anchor_member\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eUNION\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cte_recursive_member\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e cte_name\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe non-recursive mode is more common among data engineers who need to work with long and complex queries. I learned it when I needed to work a long query and a senior data engineer shared this approach, thanks Valmur! But, what is this kind of CTE? In the MYSql website we found that CTE (non-recursive) “is a named temporary result set that exists within the scope of a single statement and that can be referred to later within that statement, possibly multiple times”. The syntaxe in non-recursive form is simple when you know the recursive way. It’s necessary just not to use the reserved word RECURSIVE. So, in general it is: word reserved WITH, the cte-name, the word reserved AS, the query inside parenthesis and a query that uses a cte developed. As MYSql says, it’s common that a cte is called in different parts from the main query or many times for main and/or other cte queries.\u003c/p\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-SQL\" data-lang=\"SQL\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e cte_name_1 \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e col1, col2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e table1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecte_name_2 \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e col3, col4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e table2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecte_name_3 \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e col2, col3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e cte_name_1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eINNER\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eJOIN\u003c/span\u003e cte_name_2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e cte_name_1.col1 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cte_name_2.col4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e col2, col3 \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e cte_name_3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIn conclusion, if you work with complex queries and it’s been difficult to understand the context after some time or you need to improve the readability, try using cte. Probably, you will adopt this kind of development approach to queries on a regular basis.\u003c/p\u003e\n\u003cp\u003eReferences:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://learnsql.com.br/blog/o-que-e-um-cte-recursivo-em-sql/\"\u003ehttps://learnsql.com.br/blog/o-que-e-um-cte-recursivo-em-sql/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://learn.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms186243(v=sql.105)?redirectedfrom=MSDN\"\u003ehttps://learn.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms186243(v=sql.105)?redirectedfrom=MSDN\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mariadb.com/kb/en/recursive-common-table-expressions-overview/\"\u003ehttps://mariadb.com/kb/en/recursive-common-table-expressions-overview/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/with.html\"\u003ehttps://dev.mysql.com/doc/refman/8.0/en/with.html\u003c/a\u003e\u003c/p\u003e\n","description":"","image":"/images/projects/cte/cte.jpg","permalink":"http://localhost:1313/blogs/common-table-expression-or-just-cte/","title":"Common Table Expression or Just CTE"},{"content":"\u003cp\u003eEntrepreneurship is such a magic word that can either change reality or, it is at least, what some people think it does. With hype words and sex meaning, many people believe that entrepreneurship it’s the key to develop or increase value in society.\u003c/p\u003e\n\u003cp\u003eIt seems that people create a mythology around the entrepreneur and their performance on a regular basis. Anyone can be an entrepreneur, investing time and money and success is guaranteed.\u003c/p\u003e\n\u003cp\u003eBut is it true? When a person doesn’t have any option to make money, can he be considered an entrepreneur? Or when he is poor and the only thing that he can use is his labor force, can he be an entrepreneur? Can we accept that a delivery person is an entrepreneur just because they use their own motorcycles or bicycles to do it?\u003c/p\u003e\n\u003cp\u003eThe point is: this kind of person is not an entrepreneur, but a survivor. They need to accept any kind of work or they will be hungry and unable to feed their families.\u003c/p\u003e\n\u003cp\u003eEntrepreneurship is not a magic word that can change reality just because some people believe it. It’s not true and the reality, even in success, it’s not simple. When a person achieves good results, countless people don’t get more benefits than any ordinary employee with few guaranties.\u003c/p\u003e\n\u003cp\u003eIn Brazil, currently, there are around nine million unemployed people. Some of them don’t believe they can get a job anymore, so they quit trying. Others have been looking for two years or more. Consequently, if these people do anything to make money, they are not entrepreneurs but survivors.\u003c/p\u003e\n\u003cp\u003eDon’t believe in any mythology about entrepreneurship, in general they talk just about glamorous and successful cases and do not say anything about the failures. Anyway, failure is not beautiful and cannot be sold.\u003c/p\u003e\n\u003cp\u003eReferences:\u003c/p\u003e\n\u003cp\u003eCAVALLINI Marta. Quase 3 em cada 10 desempregados ainda seguem em busca de trabalho há mais de 2 anos, mostra IBGE. G1: Online, 2022. Acesso em 2023–01–29. \u0026lt; \u003ca href=\"https://g1.globo.com/economia/noticia/2022/11/17/quase-3-em-cada-10-desempregados-ainda-seguem-em-busca-de-trabalho-ha-mais-de-2-anos-mostra-ibge.ghtml\"\u003ehttps://g1.globo.com/economia/noticia/2022/11/17/quase-3-em-cada-10-desempregados-ainda-seguem-em-busca-de-trabalho-ha-mais-de-2-anos-mostra-ibge.ghtml\u003c/a\u003e \u0026gt;\u003c/p\u003e\n","description":"","image":"/images/blog_post_1.webp","permalink":"http://localhost:1313/blogs/about-entrepreneurship/","title":"About Entrepreneurship"},{"content":"","description":"My gallery :earth_asia:","image":null,"permalink":"http://localhost:1313/gallery/","title":"Image Gallery"},{"content":"\u003cp\u003eEmoji can be enabled in a Hugo project in a number of ways. :zap:\u003c/p\u003e\n\u003ch2 id=\"emoji-support\"\u003eEmoji Support\u003c/h2\u003e\n\u003cp\u003eThe \u003ca href=\"https://gohugo.io/functions/emojify/\"\u003eemojify\u003c/a\u003e function can be called directly in templates or \u003ca href=\"https://gohugo.io/templates/shortcode-templates/#inline-shortcodes\"\u003eInline Shortcodes\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eTo enable emoji globally, set \u003ccode\u003eenableEmoji\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e in your site’s \u003ca href=\"https://gohugo.io/getting-started/configuration/\"\u003econfiguration\u003c/a\u003e and then you can type emoji shorthand codes directly in content files; e.g.\u003c/p\u003e\n\u003cp\u003eThe \u003ca href=\"http://www.emoji-cheat-sheet.com/\"\u003eEmoji cheat sheet\u003c/a\u003e is a useful reference for emoji shorthand codes.\u003c/p\u003e\n\u003chr\u003e\r\n\u003cp\u003e\u003cstrong\u003eN.B.\u003c/strong\u003e The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e.emoji {\r\n  font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols;\r\n}\n\u003c/code\u003e\u003c/pre\u003e","description":"","image":"/images/post.jpg","permalink":"http://localhost:1313/projects/emoji-support/","title":"Emoji Support"}]